<div class="container mx-auto p-6 max-w-7xl">
  <!-- Header Section with animation -->
  <div class="mb-8 space-y-2">
    <h3 class="text-3xl font-bold text-gray-800 animate-fade-in">
      Currency Exchange Rates
    </h3>
    <p class="text-gray-600">Real-time currency conversion rates</p>
  </div>

  <!-- Currency Selectors Card -->
  <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <!-- Base Currency Selector -->
      <div class="space-y-2">
        <h4 class="text-lg font-semibold text-gray-700 flex items-center gap-2">
          <i class="pi pi-dollar text-primary-500"></i>
          Base Currency
        </h4>
        <p-dropdown
          [options]="ratesStore.currencies()"
          [ngModel]="selectedBase()"
          (ngModelChange)="ratesStore.setBaseCurrency($event.code)"
          optionLabel="code"
          [style]="{'width': '100%'}"
          styleClass="custom-dropdown"
          [virtualScroll]="true"
          [itemSize]="32"
          placeholder="Select Base Currency"
          [filter]="true">
          <ng-template let-currency pTemplate="item">
            <div class="flex items-center gap-3 p-2">
              <span class="font-medium">{{currency.symbol}}</span>
              <span class="text-gray-600">{{currency.name}}</span>
            </div>
          </ng-template>
        </p-dropdown>
      </div>

      <!-- Target Currencies Selector -->
      <div class="space-y-2">
        <h4 class="text-lg font-semibold text-gray-700 flex items-center gap-2">
          <i class="pi pi-globe text-primary-500"></i>
          Target Currencies
        </h4>
        <p-multiSelect
          [options]="ratesStore.currencies()"
          [ngModel]="selectedTargets()"
          (ngModelChange)="updateTargetCurrencies($event)"
          optionLabel="code"
          [style]="{'width': '100%'}"
          styleClass="custom-multiselect"
          placeholder="Select Target Currencies"
          [virtualScroll]="true"
          [itemSize]="32"
          [filter]="true">
          <ng-template let-currency pTemplate="item">
            <div class="flex items-center gap-3 p-2">
              <span class="font-medium">{{currency.code}}</span>
              <span class="text-gray-600">{{currency.name}}</span>
            </div>
          </ng-template>
        </p-multiSelect>
      </div>
    </div>
  </div>

  <!-- Exchange Rates Table Card -->
  <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
    <h4 class="text-lg font-semibold text-gray-700 mb-4 flex items-center gap-2">
      <i class="pi pi-chart-line text-primary-500"></i>
      Exchange Rates
    </h4>
    <p-table
      [value]="rates()"
      [tableStyle]="{ 'min-width': '50rem' }"
      styleClass="p-datatable-sm p-datatable-hoverable-rows"
      [scrollable]="true"
      responsiveLayout="scroll">
      <ng-template pTemplate="header">
        <tr class="bg-gray-50">
          <th class="text-left font-semibold">Currency Pair</th>
          <th class="text-left font-semibold">Rate</th>
          <th class="text-left font-semibold">Change (%)</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-rate>
        <tr class="hover:bg-gray-50 transition-colors duration-150">
          <td>
            <div class="flex items-center">
              <div class="w-8 flex justify-center">
                <i *ngIf="rate.changePercentage > 0"
                   class="pi pi-arrow-up text-green-500 text-lg"></i>
                <i *ngIf="rate.changePercentage < 0"
                   class="pi pi-arrow-down text-red-500 text-lg"></i>
              </div>
              <span class="font-medium">{{rate.pair}}</span>
            </div>
          </td>
          <td class="font-mono">{{rate.value | number:'1.4-4'}}</td>
          <td>
            <span class="px-3 py-1 rounded-full text-sm"
                  [ngClass]="{
                    'bg-green-100 text-green-800': rate.changePercentage > 0,
                    'bg-red-100 text-red-800': rate.changePercentage < 0,
                    'bg-gray-100 text-gray-800': rate.changePercentage === 0
                  }">
              {{rate.changePercentage ? (rate.changePercentage | number:'1.2-2') + '%' : '-'}}
            </span>
          </td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="3" class="text-center py-6">
            <div class="flex flex-col items-center text-gray-500">
              <i class="pi pi-info-circle text-3xl mb-2"></i>
              <span>No exchange rates available</span>
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>

  <!-- Update Button -->
  <button
    type="button"
    (click)="ratesStore.loadRates()"
    class="w-full bg-primary-500 hover:bg-primary-600 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2">
    <i class="pi pi-refresh"></i>
    Update Rates
  </button>
</div>
